zephyr_include_directories(.)

function(custom_library library_name sources)
  zephyr_library_named(${library_name})
  zephyr_library_sources(${sources} ${ARGN})
  # Depend on the public Zephyr interface
  target_link_libraries(${library_name} PRIVATE zephyr_interface)
  # That's some magic to build autogenerated headers.
  # See https://lists.zephyrproject.org/g/devel/message/5475.
  add_dependencies(${library_name} offsets_h)
endfunction()

custom_library(printk_event_handler printk_event_handler.cpp)
target_link_libraries(printk_event_handler PRIVATE pw_unit_test.googletest_style_event_handler)
